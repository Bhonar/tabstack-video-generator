# @tabstack/video-generator

**MCP + Skill for Claude Code**: Turn any landing page into a premium product launch video with AI-generated animations, beat-synced music, and accurate branding.

> **URL in, HD video out.** Claude Code designs unique animations, generates React code, and renders professional videos â€” in minutes. No external AI API keys needed!

---

## âœ¨ What Makes This Special

- **ðŸŽ¨ Claude Code Generates React Code**: No external AI APIs needed (no Gemini, no Claude API)
- **ðŸŽ¯ Accurate Branding**: Extracts exact colors and fonts using Playwright browser automation
- **ðŸŽµ Beat-Synchronized**: Animations hit perfectly on music beats using automatic beat detection
- **ðŸ’Ž Modern UI**: Glassmorphism, animated gradients, glow effects
- **ðŸš€ MCP + Skill Architecture**: Claude Code orchestrates tools and writes creative code

---

## ðŸŽ¬ How It Works

**You say**: "Generate a video for https://stripe.com"

**Claude Code**:
1. Calls `extract_page_data` â†’ TabStack + Playwright get content, colors, fonts
2. Calls `generate_audio` â†’ WaveSpeed creates music + beat times
3. Generates React/Remotion code itself with beat-synced animations
4. Calls `render_video` â†’ Remotion renders to HD MP4

**Result**: 12-15 second video with accurate branding and professional animations!

---

## ðŸš€ Quick Start (5 Minutes)

### Step 1: Install Prerequisites

**Node.js v18+**:
```bash
node --version   # Should show v18 or higher
```
Don't have it? Download from [nodejs.org](https://nodejs.org)

**FFmpeg** (required for video rendering):
```bash
ffmpeg -version   # Check if installed
```

Install FFmpeg:
| OS | Command |
|---------|---------|
| **macOS** | `brew install ffmpeg` |
| **Ubuntu/Debian** | `sudo apt install ffmpeg` |
| **Windows** | `winget install ffmpeg` |

---

### Step 2: Get API Keys (Free Tiers)

**Required:**
- **TabStack API Key** - Extract page content and branding
  - Go to [tabstack.ai](https://tabstack.ai)
  - Sign up â†’ Get API key
  - Free tier available

**Optional (Recommended):**
- **WaveSpeed API Key** - Generate AI music with beat sync
  - Go to [wavespeed.ai](https://wavespeed.ai)
  - Sign up â†’ Get API key
  - Free tier available
  - *Without this, videos render silently or with placeholder audio*

**âœ¨ No Gemini or Claude API keys needed!** Claude Code generates video code directly using its built-in AI.

---

### Step 3: Install MCP Server

Add the MCP server to Claude Code:

```bash
claude mcp add tabstack-video \
  -e TABSTACK_API_KEY=your_tabstack_key_here \
  -e WAVESPEED_API_KEY=your_wavespeed_key_here \
  -- npx @tabstack/video-generator
```

Replace `your_tabstack_key_here` with your actual TabStack API key.
*(WaveSpeed key is optional but recommended for AI music)*

---

### Step 4: Restart Claude Code

**Important**: MCP servers only load on startup.

1. Close all Claude Code windows completely
2. Quit the Claude Code application
3. Open Claude Code again
4. Verify MCP server is loaded (check status bar or settings)

---

### Step 5: Generate Your First Video!

In Claude Code, just say:

```
Generate a video for https://stripe.com
```

Or with AI music:

```
Generate a video for https://vercel.com with AI music
```

**That's it!** Claude Code will:
- Extract page data and branding
- Generate AI music with beat detection
- Write React/Remotion code with beat-synced animations
- Render the video to `out/stripe-video.mp4`

---

## ðŸŽ¯ Example Prompts

```
"Generate a video for https://linear.app"

"Create a product launch video for https://notion.so with AI music"

"Make a video for https://supabase.com with dramatic animations"

"Generate a video for https://resend.com and sync it to the beat"
```

Claude Code understands natural language and will orchestrate the entire workflow!

---

## ðŸ› ï¸ Verify Setup

Run the setup wizard to check your installation:

```bash
npx @tabstack/video-generator --setup
```

This checks for:
- âœ… Node.js v18+
- âœ… FFmpeg installation
- âœ… TABSTACK_API_KEY
- âš ï¸ WAVESPEED_API_KEY (optional)

---

## ðŸ—ï¸ Architecture

### MCP Tools (Server Provides)

1. **`extract_page_data`**
   - TabStack API: Extracts title, features, pricing from URL
   - Playwright: Launches headless Chrome to get computed CSS colors and fonts
   - Returns: Complete page data + accurate branding

2. **`generate_audio`** (optional)
   - WaveSpeed: Generates AI music from prompt
   - Beat detection: Uses music-tempo library to analyze beats
   - Returns: MP3 file + BPM + beat times in milliseconds + beat frames @ 30fps

3. **`render_video`**
   - Takes: React/Remotion code generated by Claude Code
   - Remotion: Renders frames + encodes to MP4 with FFmpeg
   - Returns: HD video (1920x1080, 30fps)

### Skill (Teaches Claude Code)

The `.skills/generate-video.md` file teaches Claude Code:
- âœ… Workflow: extract â†’ generate audio â†’ write React code â†’ render
- âœ… Design best practices: glassmorphism, gradients, glow effects
- âœ… Beat synchronization: pulse on beats, smooth waves, scene timing
- âœ… Modern UI patterns: proper typography, spacing, animations
- âœ… Quality checklist: colors, fonts, animations, readability

---

## ðŸ“Š What Gets Generated

### Video Specs
- **Resolution**: 1920x1080 (Full HD)
- **Frame Rate**: 30fps
- **Duration**: 12-15 seconds
- **Format**: H.264 MP4
- **Audio**: AI-generated music (if WaveSpeed key provided)

### Design Quality
- âœ… Exact brand colors (from Playwright CSS extraction)
- âœ… Exact brand fonts (from computed styles)
- âœ… Modern UI (glassmorphism, gradients, glows, shadows)
- âœ… Beat-synced animations (pulse, transitions, entrances)
- âœ… Professional typography (readable sizes, proper hierarchy)
- âœ… Smooth animations (spring physics, interpolate)

---

## ðŸŽµ Beat Synchronization

One of the standout features is **automatic beat synchronization**:

```typescript
// Generated code includes beat detection
const beatFrames = [0, 14, 28, 42, 56, 70, ...]; // @ 30fps

// Animations hit on beats
const isBeat = beatFrames.some(b => Math.abs(frame - b) < 2);
transform: `scale(${isBeat ? 1.1 : 1})`  // Pulse on beat
```

**Benefits**:
- Animations feel professional and intentional
- Scene transitions align with music
- Feature cards enter on beats
- CTA buttons pulse with rhythm

---

## ðŸ› Troubleshooting

### `ffmpeg: command not found`

**Fix**: Install FFmpeg

```bash
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt install ffmpeg

# Windows
winget install ffmpeg
```

### MCP Server Not Working

**Fix**: Restart Claude Code completely

1. Close all windows
2. Quit application
3. Open Claude Code fresh
4. Try: "Generate a video for https://stripe.com"

### Video Has No Music

**Fix**: Add WaveSpeed API key

```bash
claude mcp add tabstack-video \
  -e TABSTACK_API_KEY=your_key \
  -e WAVESPEED_API_KEY=your_wavespeed_key \
  -- npx @tabstack/video-generator
```

Then restart Claude Code.

### `TABSTACK_API_KEY not set`

**Fix**: Get API key and add to MCP server

1. Get key at [tabstack.ai](https://tabstack.ai)
2. Add with `claude mcp add` command (see Step 3)
3. Restart Claude Code

### Colors Look Wrong

The tool uses **Playwright browser automation** to extract exact CSS colors. If colors still look wrong:
- Check the website has clear branding (CTA buttons, headings)
- Try a different page with more obvious brand colors
- Report issues at GitHub with the URL

---

## ðŸ“š Learn More

- **[HOW-IT-WORKS.md](./HOW-IT-WORKS.md)** - Technical deep-dive with code examples
- **[ARCHITECTURE.md](./ARCHITECTURE.md)** - MCP + Skill architecture diagrams
- **[.skills/generate-video.md](./.skills/generate-video.md)** - Complete Skill guide

---

## ðŸŽ¯ Best Practices

**For Best Results**:
- Use clean, professional landing pages
- Sites with clear value propositions work best
- Pages with CTA buttons help color extraction
- Well-designed sites produce better videos

**Works Great With**:
- SaaS product landing pages (Stripe, Vercel, Linear)
- Marketing websites (clear messaging)
- Product launch pages

**May Struggle With**:
- E-commerce sites with many products
- Complex multi-page sites
- Sites with poor structure or minimal content

---

## ðŸ’Ž What Makes This Different

### Traditional Approach:
```
User â†’ External AI API (Gemini/Claude) â†’ Truncated code â†’ Poor quality
```

### MCP + Skill Approach:
```
User â†’ Claude Code â†’ MCP tools + Self-generated code â†’ Premium video
```

**Benefits**:
- âœ… Claude Code sees full context (no token limits)
- âœ… No code truncation (can generate 500+ lines)
- âœ… Follows Skill best practices consistently
- âœ… Beat synchronization works perfectly
- âœ… No external AI API keys needed (only data extraction)
- âœ… Can iterate and refine based on results

---

## ðŸ“– Example Workflow

```
User: "Generate a video for https://stripe.com with AI music"

Claude Code:
  [1] Calling extract_page_data...
      â†’ TabStack: {title: "Stripe", features: [...]}
      â†’ Playwright: {colors: "#635BFF", fonts: "SÃ¶hne"}

  [2] Calling generate_audio...
      â†’ WaveSpeed: Generated music
      â†’ Beat detection: 128 BPM, beats at [0, 468, 937, ...]

  [3] Generating React/Remotion code...
      â†’ Writing premium UI with glassmorphism
      â†’ Syncing animations to beat frames [0, 14, 28, ...]
      â†’ Using exact brand colors and fonts

  [4] Calling render_video...
      â†’ Remotion: Rendering 360 frames @ 30fps
      â†’ FFmpeg: Encoding to H.264 MP4

âœ… Done! Video saved to: out/stripe-video.mp4
```

---

## ðŸ¤ Contributing

Found a bug? Have a feature request?

- **Issues**: [GitHub Issues](https://github.com/Bhonar/tabstack-video-generator/issues)
- **PRs**: Always welcome!

---

## ðŸ“„ License

MIT - Use freely for personal and commercial projects!

---

## ðŸŽ‰ Credits

Built with:
- **TabStack** - Page data extraction API
- **Playwright** - Browser automation for color/font extraction
- **WaveSpeed** - AI music generation (Minimax Music 2.5)
- **music-tempo** - Beat detection library
- **Remotion** - React-based video rendering
- **Claude Code** - AI-powered code generation

---

**Ready to create amazing videos? Follow the Quick Start above!** ðŸš€
